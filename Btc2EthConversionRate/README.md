# zkGraph BTC 2 ETH conversion rate

price_flattened.sol : dummy contract I wrote specifically for this zkgraph

mapping.ts: zkgraph


You can directly run `./script.sh`


Run `zkgraph compile`


Execution `zkgraph exec 5110071`, block number 5110071 is the block that I emitted for this zkgraph

should output 0000000000000000000000000000000000000000000000000000000000000010

You can check output.png for result on my machine

The code is to calculate the BTC/ETH conversion rate for trading strategy 

It got ETH price and BTC price from the equiped demo-only smart contract price_flattened.sol. In real use case it can be any pair of currency being traded.

Contract address on Sepolia testnet 0x4137376d8214EB47Df1190659640382eEe153BE7

When run with blocknumber 5110071, should return 0x10, or 16 in Decimal. The exact number should be 41165.89/2446.7874 = 16.824465...  Precision lost as expected due to int division.

I haven't figured out a way to work with float. It looks like I should use the WebAssebmly's math library, but the documentation advice aginst it as they are not ZK friendly.





## Usage CLI

> Note: Only `full` image will be processed by zkOracle node. `local` (generated by commands ending with `--local` option) means the zkGraph is compiled locally and only contains partial computation (so that proving and executing will be faster).

The workflow of local zkGraph development must follow: `Develop` (code in /src) -> `Compile` (get compiled wasm image) -> `Execute` (get expected output) -> `Prove` (generate input and pre-test for actual proving in zkOracle) -> `Verify` (verify proof on-chain).

To upload and publish your zkGraph, you should `Upload` (upload code to IPFS), and then `Publish` (register zkGraph on onchain zkGraph Registry).

## Commonly used commands

- **compile**: `zkgraph compile`
- **exec**: `zkgraph exec 5110071`
- **prove**: ` zkgraph prove 5110071 0000000000000000000000000000000000000000000000000000000000000010 -i|-t|-p`  
- ……

Read more: https://github.com/hyperoracle/zkgraph-cli#cli
